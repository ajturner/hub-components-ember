(window.webpackJsonp_ember_auto_import_=window.webpackJsonp_ember_auto_import_||[]).push([[6],{24:function(e,t,n){"use strict"
n.r(t),n.d(t,"calcite_loader",function(){return u}),n.d(t,"hub_card",function(){return l}),n.d(t,"hub_content_card",function(){return d}),n.d(t,"hub_input",function(){return m}),n.d(t,"hub_map",function(){return w}),n.d(t,"hub_radar",function(){return x}),n.d(t,"hub_search",function(){return W}),n.d(t,"hub_suggest_input",function(){return Q})
var r=n(0),i=n(46),o=n(44),a=(n(47),n(48)),s=n(49),c=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length
var r=Array(e),i=0
for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a]
return r},u=function(){function e(e){Object(r.h)(this,e),this.isActive=!1,this.inline=!1,this.type="indeterminate",this.value=0,this.text="",this.loaderBarOffsets=[0,0,0],this.loaderBarRates=[1,2.25,3.5],this.isEdge=!1,this.animationID=null,this.guid="calcite-loader-"+Object(i.a)()}return e.prototype.componentWillLoad=function(){this.isEdge=/Edge/.test(navigator.userAgent),this.isEdge&&this.updateOffset()},e.prototype.componentDidUnload=function(){this.animationID&&window.cancelAnimationFrame(this.animationID)},e.prototype.render=function(){var e=Object(o.d)(this.el),t=this.el.id||this.guid,n={"aria-valuenow":this.value,"aria-valuemin":0,"aria-valuemax":100},i=this.inline?16:56,a=this.inline?"0 0 16 16":"0 0 56 56",s="determinate"===this.type,c={}
this.isEdge&&(c["--calcite-loader-offset"]=this.loaderBarOffsets[0]+"%",c["--calcite-loader-offset2"]=this.loaderBarOffsets[1]+"%",c["--calcite-loader-offset3"]=this.loaderBarOffsets[2]+"%")
var u={"--calcite-loader-progress":-400-4*this.value+"%"}
return Object(r.g)(r.a,Object.assign({id:t,dir:e,role:"progressbar"},"determinate"===this.type?n:{},{style:c}),Object(r.g)("svg",{viewBox:a,class:"loader__square"},Object(r.g)("rect",{width:i,height:i})),Object(r.g)("svg",{viewBox:a,class:"loader__square loader__square--2"},Object(r.g)("rect",{width:i,height:i})),Object(r.g)("svg",{viewBox:a,class:"loader__square loader__square--3",style:s?u:{}},Object(r.g)("rect",{width:i,height:i})),this.text?Object(r.g)("div",{class:"loader__text"},this.text):"",this.value?Object(r.g)("div",{class:"loader__percentage"},Math.floor(this.value)):"")},e.prototype.updateOffset=function(){var e=this
this.loaderBarOffsets=this.rotateLoaderBars(this.loaderBarOffsets),this.animationID=window.requestAnimationFrame(function(){return e.updateOffset()})},e.prototype.rotateLoaderBars=function(e){var t=this
return e.map(function(e,n){return e>-400?e-t.loaderBarRates[n]:0})},Object.defineProperty(e.prototype,"el",{get:function(){return Object(r.f)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return":root{--calcite-ui-blue:#007ac2;--calcite-ui-blue-hover:#2890ce;--calcite-ui-blue-press:#00619b;--calcite-ui-green:#35ac46;--calcite-ui-green-hover:#50ba5f;--calcite-ui-green-press:#288835;--calcite-ui-yellow:#edd317;--calcite-ui-yellow-hover:#f9e54e;--calcite-ui-yellow-press:#d9bc00;--calcite-ui-red:#d83020;--calcite-ui-red-hover:#e65240;--calcite-ui-red-press:#a82b1e;--calcite-ui-background:#f8f8f8;--calcite-ui-foreground:#fff;--calcite-ui-foreground-hover:#f3f3f3;--calcite-ui-foreground-press:#eaeaea;--calcite-ui-text-1:#151515;--calcite-ui-text-2:#4a4a4a;--calcite-ui-text-3:#6a6a6a;--calcite-ui-border-1:#cacaca;--calcite-ui-border-2:#dfdfdf;--calcite-ui-border-3:#eaeaea;--calcite-ui-border-hover:#9f9f9f;--calcite-ui-border-press:#757575}:host([theme=dark]){--calcite-ui-blue:#00a0ff;--calcite-ui-blue-hover:#0087d7;--calcite-ui-blue-press:#47bbff;--calcite-ui-green:#36da43;--calcite-ui-green-hover:#11ad1d;--calcite-ui-green-press:#44ed51;--calcite-ui-yellow:#ffc900;--calcite-ui-yellow-hover:#f4b000;--calcite-ui-yellow-press:#ffe24d;--calcite-ui-red:#fe583e;--calcite-ui-red-hover:#f3381b;--calcite-ui-red-press:#ff7465;--calcite-ui-background:#202020;--calcite-ui-foreground:#2b2b2b;--calcite-ui-foreground-hover:#353535;--calcite-ui-foreground-press:#404040;--calcite-ui-text-1:#fff;--calcite-ui-text-2:#bfbfbf;--calcite-ui-text-3:#9f9f9f;--calcite-ui-border-1:#4a4a4a;--calcite-ui-border-2:#404040;--calcite-ui-border-3:#353535;--calcite-ui-border-hover:#757575;--calcite-ui-border-press:#9f9f9f}:root{--calcite-border-radius:3px}:host([hidden]){display:none}body{font-family:Avenir Next W01,Avenir Next W00,Avenir Next,Avenir,Helvetica Neue,sans-serif}.overflow-hidden{overflow:hidden}calcite-tab{display:none}calcite-tab[is-active]{display:block}a{color:#007ac2}:host{--calcite-loader-spot:var(--calcite-ui-blue);--calcite-loader-spot-light:var(--calcite-ui-blue);--calcite-loader-spot-dark:var(--calcite-ui-blue);--calcite-loader-neutral:#eaeaea;--calcite-loader-padding:4rem}:host([theme=dark]){--calcite-loader-neutral:#151515}:host([no-padding]){--calcite-loader-padding:0}:host{position:relative;display:none;padding-bottom:var(--calcite-loader-padding);padding-top:var(--calcite-loader-padding);margin-left:auto;margin-right:auto;min-height:54px;stroke:var(--calcite-loader-light);stroke-width:6px;stroke-dashoffset:0;fill:none;animation:loader-color-shift 2s linear infinite alternate-reverse}:host([is-active]){display:block}.loader__text{margin-top:var(--calcite-loader-padding);line-height:1.5}.loader__percentage,.loader__text{display:block;text-align:center;font-size:.875rem}.loader__percentage{left:50%;margin-top:27px;line-height:.25}.loader__percentage,.loader__square{width:54px;position:absolute;top:var(--calcite-loader-padding);margin-left:-27px}.loader__square{height:54px;left:0;left:50%;stroke-dasharray:50% 350%;-webkit-animation:loader-clockwise 2s linear infinite;animation:loader-clockwise 2s linear infinite}.loader__square--2{stroke-dasharray:100% 225% 50% 25%;-webkit-animation:loader-clockwise 1s linear infinite;animation:loader-clockwise 1s linear infinite}.loader__square--3{stroke-dasharray:50% 50% 75% 225%;-webkit-animation:loader-clockwise 1.85s linear infinite;animation:loader-clockwise 1.85s linear infinite}@supports (-ms-ime-align:auto){.loader__square{stroke-dashoffset:var(--calcite-loader-offset);-webkit-animation:none;animation:none}.loader__square--2{stroke-dashoffset:var(--calcite-loader-offset2)}.loader__square--3{stroke-dashoffset:var(--calcite-loader-offset3)}}:host([type=determinate]){stroke:var(--calcite-loader-neutral);-webkit-animation:none;animation:none}:host([type=determinate]) .loader__square--3{stroke:var(--calcite-loader-spot);stroke-dasharray:400%;stroke-dashoffset:var(--calcite-loader-progress);-webkit-transition:all 50ms linear;transition:all 50ms linear;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-animation:none;animation:none}:host([inline]){stroke:currentColor;stroke-width:4px;-webkit-animation:none;animation:none;margin:0;padding-bottom:0;padding-top:0;position:relative;height:16px;min-height:16px;width:16px;margin-right:8px;vertical-align:-2px}:host([inline][dir=rtl]){margin-left:8px;margin-right:0}:host([is-active][inline]){display:inline-block}:host([inline]) .loader__square{margin:0;position:absolute;top:0;left:0;width:16px;height:16px}@-webkit-keyframes loader-color-shift{0%{stroke:var(--calcite-loader-spot-light)}to{stroke:var(--calcite-loader-spot-dark)}}@keyframes loader-color-shift{0%{stroke:var(--calcite-loader-spot-light)}to{stroke:var(--calcite-loader-spot-dark)}}@-webkit-keyframes loader-clockwise{0%{stroke-dashoffset:0}to{stroke-dashoffset:-400%}}@keyframes loader-clockwise{0%{stroke-dashoffset:0}to{stroke-dashoffset:-400%}}"},enumerable:!0,configurable:!0}),e}(),l=function(){function e(e){Object(r.h)(this,e),this.portalUrl="http://www.arcgis.com/sharing/rest/",this.item="",this.name="Trash Day",this.description="Monday",this.contenttype="Local Topic",this.layout="vertical",this.url="https://hub.arcgis.com",this.metadata=[]}return e.prototype.componentWillRender=function(){},e.prototype.render=function(){var e=[],t=null,n=null
return this.image&&(console.log("item id",this.item),t=Object(r.g)("img",{class:"content-image",src:this.portalUrl+"content/items/"+this.item+"/info/"+this.image,alt:"Thumbnail Image"})),this.contenttype&&e.push(Object(r.g)("span",{class:"content-type"},this.contenttype)),this.name&&e.push(Object(r.g)("div",{class:"content-title",innerHTML:this.name})),this.description&&e.push(Object(r.g)("p",{class:"content-summary",innerHTML:this.description})),this.metadata&&this.metadata.length>0&&(n=Object(r.g)("div",{class:"content-details"},this.metadata.map(function(e){return Object(r.g)("div",null,Object(r.g)("strong",null,e.name),": ",e.value)}))),Object(r.g)(r.a,null,Object(r.g)("div",{class:"content-card layout-"+this.layout},this.url?Object(r.g)("a",{class:"content-link",href:this.url}):"",this.image?t:"",Object(r.g)("div",{class:"content-metadata"},e,n)))},Object.defineProperty(e,"style",{get:function(){return":host{display:block;font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px}.content-card{-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.2);box-shadow:0 4px 8px 0 rgba(0,0,0,.2);-webkit-transition:.3s;transition:.3s;margin:10px;border:1px solid #eee;position:relative}.content-card a{position:absolute;height:100%;width:100%;z-index:1}.content-card .content-metadata,.content-card .content-summary,.content-card .content-title{pointer-events:none;position:relative;z-index:10}.content-card:hover{-webkit-box-shadow:0 8px 16px 0 rgba(0,0,0,.2);box-shadow:0 8px 16px 0 rgba(0,0,0,.2)}.content-title{font:#101f28!important;font-size:1rem;font-weight:700}.content-summary,.content-type{font-size:.9rem;color:#666}.layout-vertical.content-card{width:250px}.layout-vertical .content-image{height:150px;-ms-flex:0 0 auto;flex:0 0 auto}.layout-vertical img.content-image{width:100%;-o-object-fit:cover;object-fit:cover}.content-metadata{margin:.5rem .8rem}.layout-horizontal.content-card{display:-ms-flexbox;display:flex}.layout-horizontal .content-image{display:-ms-flexbox;display:flex;-ms-flex:0 0 150px;flex:0 0 150px}.layout-horizontal .content-metadata{-ms-flex:1 1 auto;flex:1 1 auto;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.content-details{color:#4c4c4c;font-size:.8em;-webkit-box-shadow:0 -1px #ccc;box-shadow:0 -1px #ccc;padding:15px 15px 0;grid-template-columns:repeat(2,50%);grid-gap:2px 5px;-ms-flex-align:center;align-items:center;-ms-flex:1 auto;flex:1 auto;display:grid}"},enumerable:!0,configurable:!0}),e}(),d=function(){function e(e){Object(r.h)(this,e),this.content="4f5c78bfe89a4304aec3a6cfd492d0cd",this.layout="vertical",this.contentItem=null}return e.prototype.componentWillLoad=function(){var e=this
null===this.contentItem&&Object(a.j)(this.content).then(function(t){e.contentItem=t})},e.prototype.render=function(){var e=[]
return this.contentItem&&e.push(Object(r.g)("hub-card",{item:this.content,contenttype:this.contentItem.type,layout:this.layout,url:this.contentItem.url,image:this.contentItem.thumbnail,name:this.contentItem.title,description:this.contentItem.snippet})),Object(r.g)(r.a,null,e)},Object.defineProperty(e,"style",{get:function(){return":host{display:block}"},enumerable:!0,configurable:!0}),e}(),p="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/"
function f(e,t){return new Promise(function(n,r){console.debug("getLocation extent",t)
var i={address:e}
if(null!=t){var o=c(t[0],t[1]).join(",")
i=Object.assign(i,{params:{searchExtent:o}})}console.log("getLocation geocodeOptions",i),function(e){var t,n={}
return"string"==typeof e?(n.params={singleLine:e},t=p):(t=e.endpoint||p,n=Object(a.d)(e,["singleLine","address","address2","address3","neighborhood","city","subregion","region","postal","postalExt","countryCode","outFields","magicKey"],{params:Object(a.c)({},e.params)})),Object(a.u)(Object(a.f)(t)+"/findAddressCandidates",n).then(function(t){if("string"!=typeof e&&e.rawResponse)return t
var n=t.spatialReference
return t.candidates.forEach(function(e){e.location.spatialReference=n,e.extent&&(e.extent.spatialReference=n)}),t})}(i).then(function(e){if(0==e.candidates.length)throw new Error("No locations found at this address.")
n(e.candidates[0].location)}).catch(r)})}function h(e,t,n){return e.hasOwnProperty(t)?function(e,t,n){switch(n[t].type){case"esriFieldTypeDate":return new Date(e[t])
default:return e[t]}}(e,t,n):""}function g(e,t){var n={}
t.fields.forEach(function(e){n[e.name]=e})
var r=[],i=e.popupInfo.title,o=e.popupInfo.description
return t.features.forEach(function(e){var t=e.attributes,a=i.replace(/\{(\w*)\}/g,function(e,r){return h(t,r,n)})
if(null!==o)var s=o.replace(/\{(\w*)\}/g,function(e,r){return h(t,r,n)})
var c={title:a,description:s||""}
r.push(c)}),r}var m=function(){function e(e){Object(r.h)(this,e),this.eventAddressUpdated=Object(r.d)(this,"eventAddressUpdated",7)}return e.prototype.componentWillLoad=function(){this.inputAddress=this.address,"string"==typeof this.extent&&(this.extent=JSON.parse(this.extent))},e.prototype.queryInputHandler=function(e){var t=this
return this.inputAddress=e.detail,function(e,t){return new Promise(function(n,r){var i,o,s,u={address:e}
if(null!=t){var l=c(t[0],t[1]).join(",")
u=Object.assign(u,{params:{searchExtent:l}})}(i=e,o=u,s=Object(a.c)({endpoint:p,params:{}},o),s.params.text=i,Object(a.u)(Object(a.f)(s.endpoint)+"/suggest",s)).then(function(e){console.debug("suggestLocations",e),n(e)}).catch(r)})}(this.inputAddress,this.extent).then(function(e){t.addressSuggestions=Array.from(e.suggestions,function(e){return e.text})}).catch(function(e){console.error("Geocode error",e)}),"true"},e.prototype.querySelectHandler=function(e){var t=this
return console.debug("radar-input querySelect",e),f(e.detail,this.extent).then(function(e){t.eventAddressUpdated.emit({address:t.address,coordinates:e})}).catch(function(e){console.error("Geocode error",e)}),"true"},e.prototype.render=function(){return Object(r.g)("hub-suggest-input",{placeholder:"Search for an address...",query:this.address,suggestions:this.addressSuggestions})},Object.defineProperty(e.prototype,"element",{get:function(){return Object(r.f)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}()
"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self
var b,y=function(e,t){return function(e,t){!function(e){function t(e){if("next"===e.toLowerCase())return"next"
var t=e&&e.match(/^(\d)\.(\d+)/)
return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e="4.14"),"https://js.arcgis.com/"+e+"/"}function r(e){return!e||t(e)?function(e){void 0===e&&(e="4.14")
var r=n(e),i=t(e)
return"next"!==i&&3===i.major?r+(i.minor<=10?"js/":"")+"esri/css/esri.css":r+"esri/themes/light/main.css"}(e):e}function i(e,t){var n=r(e),i=function(e){return document.querySelector('link[href*="'+e+'"]')}(n)
return i||function(e,t){if(t){var n=document.querySelector(t)
n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(i=function(e){var t=document.createElement("link")
return t.rel="stylesheet",t.href=e,t}(n),t),i}var o={Promise:"undefined"!=typeof window?window.Promise:void 0},a={}
function s(e,t,n){var r
n&&(r=function(e,t){var n=function n(r){t(r.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",n,!1)}
return e.addEventListener("error",n,!1),n}(e,n)),e.addEventListener("load",function n(){t(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)},!1)}function c(e){void 0===e&&(e={}),a=e}function u(){return document.querySelector("script[data-esri-loader]")}function l(){var e=window.require
return e&&e.on}function d(e){void 0===e&&(e={})
var t={};[a,e].forEach(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})
var r=t.version,c=t.url||n(r)
return new o.Promise(function(e,n){var o=u()
if(o){var a=o.getAttribute("src")
a!==c?n(new Error("The ArcGIS API for JavaScript is already loaded ("+a+").")):l()?e(o):s(o,e,n)}else if(l())n(new Error("The ArcGIS API for JavaScript is already loaded."))
else{var d=t.css
d&&i(!0===d?r:d,t.insertCssBefore),t.dojoConfig&&(window.dojoConfig=t.dojoConfig),s(o=function(e){var t=document.createElement("script")
return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(c),function(){o.setAttribute("data-esri-loader","loaded"),e(o)},n),document.body.appendChild(o)}})}function p(e){return new o.Promise(function(t,n){var r=window.require.on("error",n)
window.require(e,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
r.remove(),t(e)})})}function f(e,t){if(void 0===t&&(t={}),l())return p(e)
var n=u(),r=n&&n.getAttribute("src")
return!t.url&&r&&(t.url=r),d(t).then(function(){return p(e)})}var h={getScript:u,isLoaded:l,loadModules:f,loadScript:d,loadCss:i,setDefaultOptions:c,utils:o}
e.getScript=u,e.isLoaded=l,e.loadModules=f,e.loadScript=d,e.loadCss=i,e.setDefaultOptions=c,e.utils=o,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(t={exports:{}},t.exports),t.exports}();(b=y)&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")&&b.default
var v=y.loadModules,O=y.loadCss,w=function(){function e(e){var t=this
Object(r.h)(this,e),this.zoom=4,this.mapCenter=[-107,38.9],this.esriMapOptions={url:"https://js.arcgis.com/4.14/"},this.webmap=this.webmap?this.webmap:"41281c51f9de45edaf1c8ed44bb10e30",O(this.esriMapOptions.url+"/esri/css/main.css"),v(["esri/Map"],this.esriMapOptions).then(function(e){var n=e[0]
t.esriMap=new n({basemap:"streets"}),t.centerDidChangeHandler(t.center),t.zoomDidChangeHandler(t.zoom)})}return e.prototype.centerDidChangeHandler=function(e){console.debug("map: centerDidChangeHandler 1",[e,this.esriMapView]),void 0!==e&&this.esriMapView&&(this.mapCenter=JSON.parse(e),console.debug("map: centerDidChangeHandler 2",[this.mapCenter,this.zoom]),this.esriMapView.goTo({zoom:this.zoom,center:this.mapCenter}))},e.prototype.zoomDidChangeHandler=function(e){console.debug("map: zoomDidChangeHandler 1",[e,this.esriMapView]),void 0!==e&&this.esriMapView&&(console.debug("map: zoomDidChangeHandler 2",[this.mapCenter,this.zoom]),this.esriMapView.goTo({zoom:this.zoom,center:this.mapCenter}))},e.prototype.componentWillLoad=function(){this.mapCenter=JSON.parse(this.center)},e.prototype.componentDidUpdate=function(){console.log("component update")},e.prototype.componentDidLoad=function(){this.createEsriMapView()},e.prototype.createEsriMapView=function(){var e=this
return v(["esri/WebMap","esri/views/MapView"],this.esriMapOptions).then(function(t){var n=t[0],r=t[1],i={container:e.hostElement.querySelector("div")}
e.webmap&&(i.map=new n({portalItem:{id:e.webmap}})),e.center&&e.zoom&&(i.center=e.mapCenter,i.zoom=e.zoom),e.esriMapView=new r(i)})},e.prototype.zoomToAndHighlighFeature=function(e,t){var n=this
void 0===t&&(t=1600),this.esriMapView.when(function(){var r=e.clone()
r.set("symbol",{type:"simple-fill",color:[51,51,204,.9],style:"solid",outline:{color:"white",width:1}}),n.esriMapView.graphics.removeAll(),n.esriMapView.graphics.add(r),n.esriMapView.goTo(e.geometry,{duration:t,easing:"ease-in"})})},e.prototype.render=function(){return Object(r.g)(r.a,null,Object(r.g)("div",{class:"hub-map"}))},Object.defineProperty(e.prototype,"hostElement",{get:function(){return Object(r.f)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{center:["centerDidChangeHandler"],zoom:["zoomDidChangeHandler"]}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".hub-map,:host{height:100%;min-height:100%}"},enumerable:!0,configurable:!0}),e}(),x=function(){function e(e){Object(r.h)(this,e),this.showmap=!0,this.isLoading=!1}return e.prototype.handleAddressUpdated=function(e){this.updateRadar(e.detail.address,e.detail.coordinates)},e.prototype.updateRadar=function(e,t){var n=this
this.address=e,this.mapCenter="["+t.x+", "+t.y+"]",this.mapZoom=16,this.isLoading=!0,function(e,t){return new Promise(function(n,r){var i=e.operationalLayers.slice().reverse().map(function(e){return function(e,t){var n={url:e.url,outFields:"*",geometryType:"esriGeometryPoint",inSR:"4326"}
if(-1!==e.title.indexOf("Nearby")){var r=e.title.match(/Nearby (\d+)/),i=void 0
null!==r&&(i=parseInt(r[1])),n.distance=i,n.units="esriSRUnit_Meter"}return n.geometry=t,new Promise(function(t,r){Object(s.a)(n).then(function(n){var r={title:e.title,features:g(e,n)}
t(r)}).catch(r)})}(e,t)})
Promise.all(i).then(function(e){var t=[]
e.map(function(e){e.features.length>0&&(e.description=e.features[0].title,e.description+="<br/><em>"+e.features[0].description+"</em>"),t.push(e)}),n(t)}).catch(r)})}(this.mapItemData,t).then(function(e){n.messages=e,n.isLoading=!1})},e.prototype.componentWillLoad=function(){var e,t=this;(e=this.webmap,new Promise(function(t,n){Promise.all([Object(a.j)(e),Object(a.e)(e)]).then(t).catch(n)})).then(function(e){var n=e[0],r=e[1]
t.mapItem=n,t.mapItemData=r,t.address&&f(t.address,n.extent).then(function(e){t.updateRadar(t.address,e)}).catch(function(e){console.log("Geocode error",e)})})},e.prototype.render=function(){var e=[],t={address:this.address,extent:this.mapItem?this.mapItem.extent:null}
return e.push(Object(r.g)("hub-input",Object.assign({},t))),this.showmap&&e.push(Object(r.g)("div",{class:"radar-map"},Object(r.g)("hub-map",{center:this.mapCenter,zoom:this.mapZoom,webmap:this.webmap}))),this.isLoading?e.push(Object(r.g)("calcite-loader",{text:"Scanning radar...","is-active":!0})):void 0!==this.messages&&this.messages.length>0&&(e.push(Object(r.g)("slot",{name:"before-results"})),this.messages.forEach(function(t){e.push(Object(r.g)("hub-card",{contenttype:t.title,name:t.description?t.description:"<em>None</em>"}))})),Object(r.g)(r.a,null,e,Object(r.g)("slot",{name:"after-results"}))},Object.defineProperty(e,"style",{get:function(){return".radar-map{height:200px}"},enumerable:!0,configurable:!0}),e}(),j=a.g.apiTypes.map(function(e){return e.toLowerCase()})
function k(e){return Object.keys(e).reduce(function(t,n){return t[n]=Object.keys(e[n]).reduce(function(t,r){return t.push({key:r,docCount:e[n][r]}),t},[]).sort(S),t},{})}function S(e,t){return t.docCount>e.docCount?1:-1}var A=["tags","type","access","categories"],_={collection:"type"},I=["title","created","type","owner","modified","avgrating","numratings","numcomments","numviews"],q={name:"title"},T={orgId:{type:"filter",dataType:"string",defaultOp:"any",catalogDefinition:!0},q:{type:"simple"},page:{type:"simple"},tags:{type:"filter",dataType:"string",defaultOp:"all"},source:{type:"filter",dataType:"string",defaultOp:"any"},bbox:{type:"simple"},location_name:{type:"simple"},sort:{type:"simple"},groupIds:{type:"filter",dataType:"string",defaultOp:"any",catalogDefinition:!0},catalog:{type:"simple"},owner:{type:"filter",dataType:"string",defaultOp:"any"},access:{type:"filter",dataType:"string",defaultOp:"any"},type:{type:"filter",dataType:"string",defaultOp:"any"},hubType:{type:"filter",dataType:"string",defaultOp:"any"},downloadable:{type:"filter",dataType:"boolean"},hasApi:{type:"filter",dataType:"boolean"},openData:{type:"filter",dataType:"boolean"},id:{type:"filter",dataType:"string",defaultOp:"any",catalogDefinition:!0},collection:{type:"filter",dataType:"string",defaultOp:"any"},sector:{type:"filter",dataType:"string",defaultOp:"any"},region:{type:"filter",dataType:"string",defaultOp:"any"},initiativeId:{type:"filter",dataType:"string",defaultOp:"any",catalogDefinition:!0},categories:{type:"filter",dataType:"string",defaultOp:"any"},license:{type:"filter",dataType:"string",defaultOp:"any"},modified:{type:"filter",dataType:"string",defaultOp:"between"}}
function C(e){return e?Object.keys(e).reduce(function(t,n){var r=T[n]||{}
if(e[n]&&"filter"===r.type&&r.dataType){var i=e[n]
t[n]=function(e,t){var n=e.match(/(any|all|between)\((.+)\)/)
return n?{fn:n[1],terms:n[2].split(","),catalogDefinition:t.catalogDefinition}:{fn:t.defaultOp||null,terms:e.split(","),catalogDefinition:t.catalogDefinition}}(i,r)}return t},{}):{}}function D(e){return{any:" OR ",all:" AND ",not:" NOT ",between:" TO "}[e||"any"]}var z={downloadable:function(e){var t,n
return"true"===(Object(a.h)(e,"downloadable.terms")||[])[0]?(t=a.g.downloadableTypes.map(function(e){return'type:"'+e+'"'}),n=a.g.downloadableTypeKeywords.map(function(e){return'typekeywords:"'+e+'"'})):(t=a.g.downloadableTypes.map(function(e){return'-type:"'+e+'"'}),n=a.g.downloadableTypeKeywords.map(function(e){return'-typekeywords:"'+e+'"'})),"("+t.concat(n).join(" OR ")+")"},hasApi:function(e){return"("+((Object(a.h)(e,"hasApi.terms")||[])[0]?a.g.apiTypes.map(function(e){return'type:"'+e+'"'}).join(" OR "):a.g.apiTypes.map(function(e){return'-type:"'+e+'"'}).join(" OR "))+")"},groupIds:function(e){return"("+(Object(a.h)(e,"groupIds.terms")||[]).map(function(e){return'group:"'+e+'"'}).join(" OR ")+")"},collection:function(e){return"("+(Object(a.h)(e,"collection.terms")||[]).map(function(e){return Object(a.l)(e)}).filter(function(e){return!!e}).reduce(function(e,t){return t.forEach(function(t){e.push('type:"'+t+'"')}),e},[]).join(" OR ")+")"}}
function E(e){var t=[],n=[]
if(Object.keys(e).forEach(function(r){var i
i=z[r]?z[r](e,r):function(e,t){var n,r=Object(a.h)(e,t+".terms")||[],i=Object(a.h)(e,t+".fn")
if("between"===i){var o=r[0],s=r[1]
o===s&&(s=Object(a.k)(o,1))
var c=[o,s].map(function(e){return new Date(e).getTime()})
n=t.toLowerCase()+": ["+c.join(D(i))+"]"}else n=r.map(function(e){return t.toLowerCase()+':"'+e+'"'}).join(D(i))
return"not"===i&&(n="NOT "+n),"("+n+")"}(e,r),e[r].catalogDefinition?t.push(i):n.push(i)}),t.length){var r="("+t.join(" OR ")+")"
return n.length?r+" AND ("+n.join(" AND ")+")":r}return n.length?n.join(" AND "):""}function M(e,t,n,r){return Object(a.m)(this,void 0,void 0,function(){var i,o,s,c,u,l,d,p,f
return Object(a.n)(this,function(h){switch(h.label){case 0:return(i=function(e){void 0===e&&(e={})
var t={q:null,start:Object(a.h)(e,"page.start")||1,num:Object(a.h)(e,"page.size")||10},n=['-type:"code attachment"']
if(e.restricted&&n.push("-access:public"),e.q&&n.push(e.q),e.catalog){var r=C(e.catalog)
n.push(E(r))}var i,o,s,c,u=C(e),l=C(e.filter),d=Object(a.c)({},u,l)
if(Object.keys(d).length&&n.push(E(d)),n=n.filter(function(e){return!!e}),t.q=n.join(" AND "),e.bbox&&(t.bbox=e.bbox),e.sort){var p="-"===e.sort[0]?"desc":"asc",f="desc"===p?e.sort.substring(1).split(",")[0]:e.sort.split(",")[0]
i=f,(f=I.indexOf(i)>=0?i:i in q?q[i]:void 0)&&(t.sortField=f,t.sortOrder=p)}if(e.agg&&e.agg.fields){var h=(o=e.agg.fields,s=o.split(",").filter(function(e){return A.indexOf(e)>-1}),c=o.split(",").filter(function(e){return Object.keys(_).indexOf(e)>-1}),Object.keys(_).forEach(function(e){c.indexOf(e)>-1&&!(_[e]in s)&&s.push(_[e])}),{countFields:s.join(","),countSize:200}),g=h.countFields,m=h.countSize
t.countFields=g,t.countSize=m}return t}(e)).countFields?(o=Object(a.o)(i.countFields.split(","),3).map(function(e){return e.join(",")}),s=o.map(function(e){return Object(a.v)(Object(a.c)({},i,{params:{token:t,countFields:e,countSize:i.countSize},portal:n,authentication:r}))}),[4,Promise.all(s)]):[3,2]
case 1:for(c=h.sent(),u=[],l=0,d=c;l<d.length;l++)p=d[l],f=Object(a.h)(p,"aggregations.counts")||[],u=u.concat(f)
return c[0].aggregations={counts:u},[2,c[0]]
case 2:return[2,Object(a.v)(Object(a.c)({},i,{params:{token:t,countFields:i.countFields,countSize:i.countSize},portal:n,authentication:r}))]}})})}var P=["downloadable"],L=["hasApi","collection"],R={downloadable:function(e){return e.results.reduce(function(e,t){return(t.typeKeywords||[]).indexOf("Data")>-1||a.g.downloadableTypes.indexOf(t.type)>-1?e.downloadable.true++:e.downloadable.false++,e},{downloadable:{true:0,false:0}})},hasApi:function(e){void 0===e&&(e={})
var t=(Object(a.h)(e,"counts")||[]).filter(function(e){return"type"===e.fieldName})[0]
return t?t.fieldValues.reduce(function(e,t){return j.indexOf(t.value)>-1?e.hasApi.true+=t.count:e.hasApi.false+=t.count,e},{hasApi:{true:0,false:0}}):{hasApi:{}}},collection:function(e){void 0===e&&(e={})
var t=(Object(a.h)(e,"counts")||[]).filter(function(e){return"type"===e.fieldName})[0]
return t?t.fieldValues.reduce(function(e,t){var n,r=Object(a.i)(t.value)
return n=r?r.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" "):"Other",e.collection[n]=t.count,e},{collection:{}}):{collection:{}}}}
function F(e,t,n,r,i){return void 0===e&&(e={counts:Array()}),Object(a.m)(this,void 0,void 0,function(){var o,s,c,u,l,d,p,f,h
return Object(a.n)(this,function(g){switch(g.label){case 0:return o=Object(a.h)(t,"agg.fields"),s=o?o.split(","):[],c=N(s,P),u={},c.length>0?((l=Object(a.c)({},t,{start:1,num:100})).agg={},[4,M(l,n,r,i)]):[3,2]
case 1:d=g.sent(),c.forEach(function(e){var t=R[e](d)
u=Object(a.c)({},u,k(t))}),g.label=2
case 2:return p=e.counts.reduce(function(e,t){return e[t.fieldName]=t.fieldValues.map(function(e){return{key:e.value,docCount:e.count}}),e},{}),c=N(s,L),f={},c.length>0&&c.forEach(function(t){var n=Object(a.c)({},R[t](e))
f=Object(a.c)({},f,k(n))}),(h=Object(a.c)({},u,p,f)).categories&&(h.categories=function(e){void 0===e&&(e=[])
var t=new Set,n=["","categories"]
return e.forEach(function(e){e.key.split("/").filter(function(e){return-1===n.indexOf(e)}).forEach(function(e){t.add(e)})}),Array.from(t).reduce(function(t,n){var r=e.filter(function(e){return e.key.includes(n)}).map(function(e){return e.docCount}).reduce(function(e,t){return e+t})
return t.push({key:n,docCount:r}),t},[])}(h.categories)),[2,h]}})})}function N(e,t){return e.filter(function(e){return-1!==t.indexOf(e)})}function H(e,t,n){if(e)try{var r=e.match(new RegExp(t,"ig"))
if(!r)return
return r.reduce(function(e){return function(t,n){var r='<mark class="hub-search-highlight '+e+'-highlight">'+n+"</mark>"
return t.replace(new RegExp(n,"g"),r)}}(n),e)}catch(e){return}}function V(e){var t,n=Object(a.i)(e.type),r={name:e.title,searchDescription:e.description,hubType:n||"Other",collection:Object(a.p)(e),extent:(t=e.extent,{coordinates:t,type:"envelope"})}
return Object(a.c)({},e,r)}function B(e,t,n,r){return Object(a.m)(this,void 0,void 0,function(){var i,o
return Object(a.n)(this,function(s){switch(s.label){case 0:return[4,M(e,t,n,r)]
case 1:return[4,F((i=s.sent()).aggregations,e,t,n)]
case 2:return o=s.sent(),[2,function(e,t,n){void 0===t&&(t={})
var r=Object(a.c)({},n)
return{data:e.results.map(function(e){return function(e,t){var n={id:e.id,type:"item",attributes:V(e)}
return t&&(n.meta={},n.meta.highlights=function(e,t){return{name:H(e.title,t,"name"),searchDescription:H(e.description,t,"description")}}(e,t)),n}(e,r.q)}),meta:{query:e.query,queryParameters:r,stats:{aggs:t,count:e.results.length,totalCount:e.total},page:{start:e.start,size:e.num,nextStart:e.nextStart}}}}(i,o,e)]}})})}var W=function(){function e(e){Object(r.h)(this,e),this.results=[]}return e.prototype.queryInputHandler=function(e){return this.queryInput=e.detail,"true"},e.prototype.querySelectHandler=function(e){var t=this
return this.queryInput=e.detail,this.results=[],this.fetchResults(this.queryInput).then(function(e){console.log("Search",e),t.results=e.data}),"true"},e.prototype.componentWillLoad=function(){},e.prototype.fetchResults=function(e){return B({q:e})},e.prototype.render=function(){var e=[]
return e.push(Object(r.g)("hub-suggest-input",{placeholder:"Search for content",suggestions:this.suggestions})),this.results.map(function(t){e.push(Object(r.g)("hub-content-card",{layout:"horizontal",content:t.id}))}),Object(r.g)(r.a,null,Object(r.g)("slot",null),e)},Object.defineProperty(e,"style",{get:function(){return":host{display:block}"},enumerable:!0,configurable:!0}),e}(),Q=function(){function e(e){var t=this
Object(r.h)(this,e),this.query="",this.placeholder="What are you looking for?",this.submit="Start Search",this.suggestions=["Apple","Avocado","Aardvark","Banana"],this.inputQuery="",this.suggestionArr=[],this.findMatch=function(e){return 0===e.length?[]:t.suggestions.filter(function(t){return t.slice(0,e.length)===e&&t!==e})},this.onSelect=function(e){t.inputQuery=e,t.selectedSuggestionIndex=void 0,t.showSuggestions=!1,t.querySelect.emit(t.inputQuery)},this.onFocus=function(){t.showSuggestions=!0,t.selectedSuggestionIndex=void 0,t.suggestionArr=t.findMatch(t.inputQuery)},this.onKeyDown=function(e){switch(e.key){case"ArrowUp":t.suggestionArr.length>0&&(t.selectedSuggestionIndex=void 0===t.selectedSuggestionIndex||0===t.selectedSuggestionIndex?t.suggestionArr.length-1:t.selectedSuggestionIndex-1)
break
case"ArrowDown":t.suggestionArr.length>0&&(t.selectedSuggestionIndex=void 0===t.selectedSuggestionIndex||t.selectedSuggestionIndex===t.suggestionArr.length-1?0:t.selectedSuggestionIndex+1)}},this.onKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),void 0!==t.selectedSuggestionIndex?t.onSelect(t.suggestionArr[t.selectedSuggestionIndex]):t.onSelect(t.inputQuery))},this.getSuggestionElement=function(e){var n=void 0!==t.selectedSuggestionIndex&&e===t.suggestionArr[t.selectedSuggestionIndex]
return Object(r.g)("li",{class:"suggestions-li "+(n?"suggestions-selected":""),onClick:function(){return t.onSelect(e)}},e)},this.querySelect=Object(r.d)(this,"querySelect",7),this.queryInput=Object(r.d)(this,"queryInput",7)}return e.prototype.componentWillLoad=function(){this.inputQuery=this.query},e.prototype.suggestionsDidChangeHandler=function(){this.suggestionArr=this.findMatch(this.inputQuery),this.showSuggestions=!0},e.prototype.handleWindowClick=function(e){this.element.contains(e.target)||(this.showSuggestions=!1,this.selectedSuggestionIndex=void 0)},e.prototype.onInput=function(e){return this.inputQuery=e.target.value,this.queryInput.emit(this.inputQuery),this.onFocus(),"true"},e.prototype.onSubmit=function(e){e.preventDefault(),this.query=this.inputQuery,this.onSelect(this.query)},e.prototype.render=function(){var e=this
return Object(r.g)("div",{class:"suggestions-div"},Object(r.g)("form",{id:"annotation-form",onSubmit:function(t){return e.onSubmit(t)}},Object(r.g)("slot",{name:"before-input"}),Object(r.g)("input",{class:"suggestions-input",type:"text",placeholder:this.placeholder,value:this.inputQuery,onInput:function(t){return e.onInput(t)},onFocus:function(){return e.onFocus()},onKeyDown:function(t){return e.onKeyDown(t)},onKeyPress:function(t){return e.onKeyPress(t)}}),Object(r.g)("ul",{class:"suggestions-ul",role:"listbox",hidden:!this.showSuggestions},this.suggestionArr.map(function(t){return e.getSuggestionElement(t)})),Object(r.g)("input",{type:"submit",value:this.submit})))},Object.defineProperty(e.prototype,"element",{get:function(){return Object(r.f)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{suggestions:["suggestionsDidChangeHandler"]}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"input[type=text]{border:none;border-bottom:2px solid grey;font-size:1.2rem;margin:5px 10px}.autocomplete{position:relative;display:inline-block}input{border:1px solid transparent;padding:10px;font-size:16px}input,input[type=text]{background-color:#f1f1f1}input[type=text]{width:60%}input[type=submit]{background-color:#1e90ff;color:#fff;cursor:pointer}input[type=submit]:hover{-webkit-box-shadow:0 8px 16px 0 rgba(0,0,0,.2);box-shadow:0 8px 16px 0 rgba(0,0,0,.2)}.autocomplete-items{position:absolute;border:1px solid #d4d4d4;border-bottom:none;border-top:none;z-index:99;top:100%;left:0;right:0}.autocomplete-items div{padding:10px;cursor:pointer;background-color:#fff;border-bottom:1px solid #d4d4d4}.autocomplete-items div:hover{background-color:#e9e9e9}.autocomplete-active{background-color:#1e90ff!important;color:#fff}.suggestions-div{position:relative}.suggestions-input{width:100%}.suggestions-ul{list-style:none;border:1px solid #add8e6;background-color:#fff;position:absolute;margin:0;padding:0;width:80%;z-index:100}.suggestions-li:hover{cursor:pointer;background-color:#000;color:#fff}.suggestions-selected{background-color:#00f;color:#fff}"},enumerable:!0,configurable:!0}),e}()},44:function(e,t,n){"use strict"
function r(e){return Array.isArray(e)?e:Array.prototype.slice.call(e)}function i(e){return a(e,"dir","ltr")}function o(e){return a(e,"theme","light")}function a(e,t,n){var r=e.closest("["+t+"]")
return r?r.getAttribute(t):n}function s(e,t){var n=e.querySelector("slot")
return r(n?n.assignedElements():e.children).filter(function(e){return e.matches(t)})}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r})},46:function(e,t,n){"use strict"
n.d(t,"a",function(){return r})
var r=function(){return[2,1,1,1,3].map(function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1)
return t}).join("-")}},47:function(e,t,n){"use strict"
n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o})
var r="M6.293 12l4-4-4-4h1.414l4 4-4 4z",i="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",o="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z"},49:function(e,t,n){"use strict"
n.d(t,"a",function(){return i})
var r=n(48)
function i(e){var t=Object(r.d)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object(r.c)({where:"1=1",outFields:"*"},e.params)})
return Object(r.u)(Object(r.f)(e.url)+"/query",t)}}}])
